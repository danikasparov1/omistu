<?xml version="1.0" encoding="UTF-8"?>
<odoo>

    <!-- Property Tree View -->
    <record id="view_property_tree" model="ir.ui.view">
        <field name="name">property.management.tree</field>
        <field name="model">property.management</field>
        <field name="arch" type="xml">
            <tree>
                <field name="name"/>
                <field name="site"/>
                <field name="floor"/>
                <field name="area"/>
                <field name="bedroom_count"/>
                <field name="price"/>
                <field name="quantity"/>
                <field name="status" widget="badge" optional="hide"
                       decoration-danger="status == 'sold'"
                       decoration-success="status == 'available'"/>
                <field name="property_code" readonly="1"/>
            </tree>
        </field>
    </record>

<record id="view_property_kanban" model="ir.ui.view">
    <field name="name">property.management.kanban</field>
    <field name="model">property.management</field>
    <field name="arch" type="xml">
        <kanban>
            <field name="name"/>
            <field name="site"/>
            <field name="floor"/>
            <field name="area"/>
            <field name="bedroom_count"/>
            <field name="price"/>
            <field name="status"/>
            <templates>
                <t t-name="kanban-box">
                    <div t-att-class="'crm_addissystem_oe_kanban_card property_card ' + (record.status.raw_value == 'available' and 'available' or 'sold')"
                         t-att-data-id="record.id"
                         t-attf-href="/web#id={{record.id.raw_value}}&amp;model=property.management&amp;view_type=form"
                         onclick="window.location=this.getAttribute('href')"
                         style="cursor: pointer;">
                        
                        <!-- Ribbon for Status -->
                        <div t-att-class="'ribbon ' + (record.status.raw_value == 'available' and 'ribbon-success' or 'ribbon-danger')">
                            <t t-esc="record.status.raw_value"/>
                        </div>

                        <!-- Property Grey Card -->
                        <div class="property_inner_card">
                            <div class="property_header">
                                <strong class="property_name" t-esc="record.name.raw_value"/>
                            </div>

                            <!-- Property Details with Colorful Text -->
                            <div class="property_body">
                                <div><span class="label">🏠 Site:</span> <span class="text-blue" t-esc="record.site.raw_value"/></div>
                                <div><span class="label">📍 Floor:</span> <span class="text-purple" t-esc="record.floor.raw_value"/></div>
                                <div><span class="label">📏 Area:</span> <span class="text-green" t-esc="record.area.raw_value"/> m²</div>
                                <div><span class="label">🛏 Bedrooms:</span> <span class="text-orange" t-esc="record.bedroom_count.raw_value"/></div>
                                <div><span class="label">💰 Price:</span> <span class="text-red" t-esc="record.price.raw_value"/> USD</div>
                            </div>
                        </div>
                    </div>
                </t>
            </templates>
        </kanban>
    </field>
</record>






    <!-- Property Form View -->
    <record id="view_property_form" model="ir.ui.view">
        <field name="name">property.management.form</field>
        <field name="model">property.management</field>
        <field name="arch" type="xml">
            <form string="Property">
                <header>
                    <button name="action_mark_as_sold" type="object"
                            groups="property_management.group_user_addis_systems_manager_property_managemnt"
                            string="Mark as Sold" class="btn-primary"

                            invisible="status == 'sold'"/>
                    <button name="action_mark_as_available" type="object"
                            groups="property_management.group_user_addis_systems_manager_property_managemnt"
                            string="Mark as Available" class="btn-secondary"
                            invisible="status == 'available'"/>
                </header>
                <sheet>
                    <group>
                        <field name="status" widget="statusbar" statusbar_visible="available,sold"/>
                    </group>
                    <group>
                        <field name="name"/>
                        <field name="site"/>
                        <field name="floor"/>
                        <field name="area"/>
                         <field name="bedroom_count"  invisible="name == 'rent'"/>
                        <field name="price"/>
                        <field name="quantity"/>
                        <field name="property_code" readonly="1"/>
                    </group>
                </sheet>
            </form>
        </field>
    </record>

    <!-- CRM Lead View with Property Selection -->
    <!-- <record id="view_crm_lead_form" model="ir.ui.view">
        <field name="name">crm.lead.form.inherit</field>
        <field name="model">crm.lead</field>
        <field name="inherit_id" ref="crm.crm_lead_view_form"/>
        <field name="arch" type="xml">
            <xpath expr="//sheet/group" position="inside">
                <group>
                    <field name="property_ids" widget="many2many_tags"
                           domain="[('status', '=', 'available')]"/>
                </group>
            </xpath>
        </field>
    </record> -->

    <!-- Property List View -->
    <record id="action_property_list" model="ir.actions.act_window">
        <field name="name">Properties</field>
        <field name="res_model">property.management</field>
        <field name="view_mode">tree,form,kanban</field>
        <field name="help" type="html">
            <p>Manage available and sold properties here.</p>
        </field>
    </record>

    <!-- Main Menu -->
    <!-- <menuitem id="real_estate_menu_new" name="Real Estate" sequence="1"/> -->

    <!-- Property Management Menu -->
    <menuitem id="property_list_menu_sfsaf" name="Stock" parent="crm.crm_menu_root"
              action="action_property_list" sequence="50"/>

</odoo>
